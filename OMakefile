.PHONY: makelib testlib install clean

FILES[] =
   logger

LIB = logger

section
   BYTE_ENABLED = true
   OCAML_LIBS = logger
   OCAMLPPFLAGS = -pp 'camlp4o pa_extend.cmo q_MLast.cmo' 
   OCAMLDEPFLAGS += -pp 'camlp4o pa_extend.cmo q_MLast.cmo'
   OCAMLINCLUDES += +camlp4
   pa_logger.cmx pa_logger$(EXT_OBJ):
   pa_logger.cmo:
   pa_logger.cmi:

.DEFAULT: $(OCamlLibrary $(LIB), $(FILES)) \
          pa_logger.cmo

TEST = test
TEST_FILES = test

section
   OCAML_OTHER_LIBS = unix
   OCAML_LIBS = logger
   OCAMLPPFLAGS = -pp 'camlp4o pa_logger.cmo'
   test.cmx test$(EXT_OBJ):
   test.cmo:
   test.cmi:
   OCamlProgram($(TEST), $(TEST_FILES))

testlib: $(TEST)$(EXE)

testview:
   camlp4o ./pa_logger.cmo pr_o.cmo test.ml

IFILES[] =
   logger

ALIBS[] =
   pa_logger.cmo

LibInstall(makelib, $(LIB), $(IFILES), $(ALIBS))

install: makelib

clean:
   $(CLEAN) $(TEST)$(EXE)
  
